<div class="container p-3">

  <div class="row">
    <div class="col col-7">

        <h1>Build a Ballot</h1>
        <p>A ballot consists of ballot groups, ballot group sections, and ballot items</p>
    
        <h5>JSON Output</h5>
        <pre>{{ buildBallotForm.value | json }}</pre>
        
        <form *ngIf="ready" [formGroup]="buildBallotForm">
                
            <div class="form-group">
                <label>Ballot Title</label>
                <input type="text" class="form-control form-control-sm  rounded-0" formControlName="ballotTitle">
            </div>

            <div class="form-group">
              <label>Ballot Location</label>
              <input type="text" class="form-control form-control-sm  rounded-0" formControlName="ballotLocation">
            </div>

            <div class="form-group">
              <label>Ballot Date</label>
              <input type="text" class="form-control form-control-sm  rounded-0" formControlName="ballotDate">
            </div>

            <div class="form-group">
              <label for="ballotImageUp">Ballot Image</label>
              <input 
                type="file" 
                class="form-control-file" 
                name="ballotImageUp"
                (change)="onFileChange($event)">
                <input type="hidden" name="ballotImageHidden" formControlName="ballotImage"/>
            </div>

            <div class="form-group">
                <label>Ballot Information</label>
                <textarea class="form-control form-control-sm  rounded-0" formControlName="ballotInformation"></textarea>
            </div>
    
            <!--ballotGroups-->
            <div formArrayName="ballotGroups">
                <div *ngFor="let contract of buildBallotForm.controls.ballotGroups.controls; let i=index" class="nv-builder__group my-3 p-2">
                    <div>
                        <span>Ballot Group {{i + 1}}</span>
                        <span *ngIf="buildBallotForm.controls.ballotGroups.controls.length > 1" (click)="removeBallotGroup(i)"></span>
                    </div>
                    <div [formGroupName]="i">
                        <ballot-group [group]="buildBallotForm.controls.ballotGroups.controls[i]"></ballot-group>
                    </div>
                </div>
            </div>
            <div class="mt-3">
                <button (click)="addBallotGroup()" class="btn btn-primary">
                    Add ballot group +
                </button>
            </div>
    
            <div class="mt-4">
                <button (click) = "saveBallot()" class="btn btn-success btn-large">Save Ballot</button>
                <button (click) = "activateBallot()" class="btn btn-success btn-large">Activate Ballot</button>
            </div>
            
        </form>
        
    </div>

    <div class="col col-5">

      <div class="mt-5">
        
        <div class="nv-mock">

            <div class="nv-mock__inner">

                <div class="nv-mock__preview">

                    <div class="nv-preview__header">

                        <div class="nv-preview__image"><img src="/assets/roswell.jpeg"></div>
        
                        <div class="nv-preview__meta">
                            <p>{{buildBallotForm.controls.ballotTitle.value}}<br>{{buildBallotForm.controls.ballotLocation.value}}</p>    
                        </div>

                        <div class="nv-preview__groups">

                            <div *ngFor="let preGroup of buildBallotForm.controls.ballotGroups.controls.value" class="nv-preview__group">
                                    <!-- {{preGroup.}} -->
                            </div>
                        </div>

                    </div>
                    
                </div>

                <!-- <img src="/assets/phone-mock.svg"> -->
                <svg version="1.1" id="Layer_1" class="shadow" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                viewBox="0 0 861 1732" enable-background="new 0 0 861 1732" xml:space="preserve">
                    <g>
                        <path display="none" fill="#686868" d="M838,1638.8c0,44.3-35.5,80.2-79.9,80.2H101c-44.5,0-81-35.9-81-80.2V93.2
                            C20,48.9,56.6,13,101,13h657c44.5,0,79.9,35.9,79.9,80.2V1638.8z"/>
                        <path fill="#333333" d="M757.1,0h-655C50.1,0,7,41.8,7,93v1546.2c0,51.2,43.1,92.7,95.2,92.7h655c52.1,0,93.9-41.5,93.9-92.7V93
                            C851,41.8,809.2,0,757.1,0z M804,1538H54V204h750V1538z"/>
                        <circle fill="#222222" cx="429.7" cy="1626" r="61.6"/>
                        <path fill="#222222" d="M492,109c0,2.8-2.2,5-5,5H370c-2.8,0-5-2.2-5-5l0,0c0-2.8,2.2-5,5-5h117C489.8,104,492,106.2,492,109
                            L492,109z"/>
                        <circle fill="#222222" cx="429.4" cy="57.9" r="12.7"/>
                        <circle fill="#222222" cx="294.4" cy="110.3" r="14"/>
                        <path fill="#333333" d="M859,376h-8v122h8c1.4,0,2-1.1,2-2.5V378.5C861,377.1,860.4,376,859,376z"/>
                        <path fill="#333333" d="M7,219H5c-1.4,0-3,1.1-3,2.5v52.9c0,1.4,1.6,2.5,3,2.5h2V219z"/>
                        <path fill="#333333" d="M7,376H3c-1.4,0-3,1.1-3,2.5v116.9c0,1.4,1.6,2.5,3,2.5h4V376z"/>
                        <path fill="#333333" d="M7,536H3c-1.4,0-3,1.1-3,2.5v116.9c0,1.4,1.6,2.5,3,2.5h4V536z"/>
                    </g>
                </svg>

            </div>
            
        </div>
  
      </div>

    </div>

  </div>

</div>

<div class="px-3">

  <div *ngIf="ballot">
    <h1 class="mt-4">Ballot Results: <strong>{{ballot.json.ballotTitle}}</strong></h1>
    <p><a routerLink="/ballot-builder/{{ballot.id}}"><span class="oi oi-arrow-left"></span> Back to ballot</a></p>  
  </div>

  <div *ngIf="ballot">

    <spinner name="resultsSpinner" [(hidden)]="isDataAvailable">
      <div class="nv-spinner  is-animating">
        <div class="nv-spinner__text">Compiling Results...</div>
        <div class="nv-spinner__anim"></div>
      </div>
    </spinner>

    <div *ngIf="isDataAvailable">

      <div *ngFor="let bGroup of ballot.json.ballotGroups; let groupIdx = index; last as isLast" class="nv-results__group" [class.is-last-group]="isLast">
    
          <h5>{{bGroup.groupTitle}}</h5>
          <div class="row">
    
            <ng-container *ngFor="let bSection of bGroup.ballotSections; let sectionIdx = index" >
    
              <div class="col-4 mb-5">
    
                  <p>{{bSection.sectionTitle}}</p>
        
                  <canvas baseChart
                  [datasets]="pieChartData"
                  [options]="pieChartOptions"
                  [colors]="pieChartColors"
                  [legend]="pieChartLegend"
                  [chartType]="pieChartType"
                  (chartHover)="chartHovered($event)"
                  (chartClick)="chartClicked($event)"></canvas>
        
                  <!-- <ballot-results-chart *ngIf="isDataAvailable" [resultData]="bSection"></ballot-results-chart> -->
    
                </div>
                <div *ngIf="(i + 1) % 3 == 0" class="w-100"></div>
    
            </ng-container>
    
          </div>
          
        </div>

    </div>

  </div>

</div>